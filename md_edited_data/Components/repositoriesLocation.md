{% javascripts '@CoreWebBundle/Resources/public/js/markerclusterer\_compiled.js' %} function initialize() { var mapOptions = {}; if ($("#map-canvas").parent().is(".thumb")) { mapOptions = { zoom: 0, center: new google.maps.LatLng(20, 20), mapTypeId: google.maps.MapTypeId.ROADMAP, disableDefaultUI: true, draggable: false, scrollwheel: false, disableDoubleClickZoom: true, zoomControl: false } } else { mapOptions = { zoom: 2, center: new google.maps.LatLng(20, 20), mapTypeId: google.maps.MapTypeId.ROADMAP, disableDefaultUI: true } } $('#map-canvas').height($('#map').height()); var image = {url: 'images-legacy/150\_oa\_logo.png', scaledSize: {width: 15, height: 20}}; var markers = \[\]; $.getJSON("/repositories/locations", function (positions) { var items = \[\]; $.each(positions, function (i, val) { var myLatLng = new google.maps.LatLng(positions\[i\].latitude, positions\[i\].longitude); var name = positions\[i\].name; var beachMarker = new google.maps.Marker({ position: myLatLng, map: map, title: name, icon: image }); markers.push(beachMarker); }) var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions); var markerCluster = new MarkerClusterer(map, markers); $('#map-canvas').height($('#map').height()); }).error(function () { console.log("Error in getting the map"); $('#map').height(0); $('#map-canvas').height(0); }); } google.maps.event.addDomListener(window, 'load', initialize); {% endjavascripts %}